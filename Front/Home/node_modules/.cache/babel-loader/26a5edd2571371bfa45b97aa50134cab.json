{"ast":null,"code":"var _jsxFileName = \"/home/arsalan/Desktop/Front/Home/src/components/Sidebar/SidebarTokenLinker.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport * as FaIcons from 'react-icons/fa';\nimport { apiBaseURL, dashboardURL, signInURL, signUpURL } from '../../IPAddresses/IPaddresses';\nimport { SidebarLabel, SidebarLink } from './Elements';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction SidebarTokenLinker() {\n  _s();\n\n  const [isSignedIn, setIsSignedIn] = useState(false);\n  const [username, setUsername] = useState(\"Guest\");\n\n  function getCookie(name) {\n    var nameEQ = name + \"=\";\n    var ca = document.cookie.split(';');\n\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n\n      while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n\n      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n    }\n\n    return null;\n  }\n\n  function checkToken(_callback) {\n    var token = getCookie(\"token\");\n    console.log(token);\n\n    if (token == null) {\n      return;\n    }\n\n    var myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n    myHeaders.append('Authorization', 'Barear ' + token);\n    var requestOptions = {\n      method: 'GET',\n      headers: myHeaders,\n      redirect: 'follow'\n    };\n    var status;\n    fetch(apiBaseURL + 'getProfile', requestOptions).then(response => {\n      status = response.statusText;\n      console.log(response);\n      console.log(status);\n      return response;\n    }).then(response => response.json()).then(result => {\n      console.log(status);\n      console.log(result);\n\n      if (status == \"OK\") {\n        _callback(true, result.username);\n      }\n\n      console.log(result.message);\n      return;\n    }).catch(error => console.log('error', error));\n  }\n\n  useEffect(() => {\n    checkToken((state, username) => {\n      setIsSignedIn(state);\n      setUsername(username);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: isSignedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(SidebarLink, {\n        to: {\n          pathname: dashboardURL\n        },\n        target: \"_blank\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(FaIcons.FaUser, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(SidebarLabel, {\n            children: username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }, this)\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(SidebarLink, {\n        to: {\n          pathname: signInURL\n        },\n        target: \"_blank\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(FaIcons.FaSignInAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(SidebarLabel, {\n            children: \"Sign In\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(SidebarLink, {\n        to: {\n          pathname: signUpURL\n        },\n        target: \"_blank\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(FaIcons.FaUserPlus, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(SidebarLabel, {\n            children: \"Sign Up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)\n  }, void 0, false);\n}\n\n_s(SidebarTokenLinker, \"0CxXF9U8f0Uhci8hsrwZaQeRG5Y=\");\n\n_c = SidebarTokenLinker;\nexport default SidebarTokenLinker;\n\nvar _c;\n\n$RefreshReg$(_c, \"SidebarTokenLinker\");","map":{"version":3,"sources":["/home/arsalan/Desktop/Front/Home/src/components/Sidebar/SidebarTokenLinker.js"],"names":["React","useEffect","useState","FaIcons","apiBaseURL","dashboardURL","signInURL","signUpURL","SidebarLabel","SidebarLink","SidebarTokenLinker","isSignedIn","setIsSignedIn","username","setUsername","getCookie","name","nameEQ","ca","document","cookie","split","i","length","c","charAt","substring","indexOf","checkToken","_callback","token","console","log","myHeaders","Headers","append","requestOptions","method","headers","redirect","status","fetch","then","response","statusText","json","result","message","catch","error","state","pathname"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport * as FaIcons from 'react-icons/fa';\nimport { apiBaseURL, dashboardURL, signInURL, signUpURL } from '../../IPAddresses/IPaddresses';\nimport { SidebarLabel, SidebarLink } from './Elements';\n\nfunction SidebarTokenLinker() {\n\n    const [isSignedIn, setIsSignedIn] = useState(false);\n    const [username, setUsername] = useState(\"Guest\");\n\n    function getCookie(name) {\n        var nameEQ = name + \"=\";\n        var ca = document.cookie.split(';');\n        for(var i=0;i < ca.length;i++) {\n            var c = ca[i];\n            while (c.charAt(0)==' ') c = c.substring(1,c.length);\n            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\n        }\n        return null;\n    }\n      \n    function checkToken (_callback) {\n    \n        var token = getCookie(\"token\");\n        console.log(token);\n        \n        if(token == null) {\n            return;\n        }\n        \n        var myHeaders = new Headers();\n        myHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n        myHeaders.append('Authorization', 'Barear ' +token);\n    \n        var requestOptions = {\n        method: 'GET',\n        headers: myHeaders,\n        redirect: 'follow'\n        };\n        \n        var status;\n        fetch(apiBaseURL + 'getProfile', requestOptions)\n        .then(response => {\n            status = response.statusText;\n            console.log(response);\n            console.log(status);\n            return response;\n            })  \n        \n        .then(response => response.json())\n        .then( result => {\n            console.log(status);\n            console.log(result);\n            \n        \n            if(status == \"OK\") {\n                _callback(true, result.username);\n            }\n        \n            console.log(result.message);\n            return;\n        \n        })\n        .catch(error => console.log('error', error));\n    }\n    \n    useEffect(() => {\n        checkToken((state, username) => {setIsSignedIn(state); setUsername(username);})\n    }, []);\n\n    return (\n        <>\n           {isSignedIn? \n                <>\n                    <SidebarLink to={{pathname : dashboardURL}} target=\"_blank\">\n                    <div>\n                        <FaIcons.FaUser/>\n                        <SidebarLabel>{username}</SidebarLabel>\n                    </div>\n                    </SidebarLink>\n                </>\n                :\n                <>\n                    <SidebarLink to={{pathname : signInURL}} target=\"_blank\">\n                    <div>\n                        <FaIcons.FaSignInAlt/>\n                        <SidebarLabel>Sign In</SidebarLabel>\n                    </div>\n                    </SidebarLink>\n                    <SidebarLink to={{pathname : signUpURL}} target=\"_blank\">\n                    <div>\n                        <FaIcons.FaUserPlus/>\n                        <SidebarLabel>Sign Up</SidebarLabel>\n                    </div>\n                    </SidebarLink>\n                </>\n            }    \n        </>\n    )\n}\n\nexport default SidebarTokenLinker;"]},"metadata":{},"sourceType":"module"}